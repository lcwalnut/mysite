---
tags: 
  - docs
  - data
author: ccwuyu 
---

# 数据交互

::: tip
1. form：最基本、最简单    http数据请求其实都是表单
2. AJAX：不用刷新   跟更节约流量  用户体验更好 | 默认情况下不能跨域，配合对方服务器的情况下可以跨域
3. JSONP：跨域 | 安全性太差  |  逐渐被淘汰
4. websocket：【不是表单】 快 民间测试性能比ajax高10~7000倍（收环境，通信信息影响） |  双向通信（双工通信）|  直接跨域
:::

## 跨域：
www.baidi.com => www.360.cn/1.txt
xss  跨站脚本攻击
1. 跨域有风险
2. 第三方数据交互需求

跨域方式[域名、端口、协议不同]
1. form
2. ajax - 麻烦、安全
3. jsonp - 简单、有风险
4. websocket



## 安全性：
1.系统性：内核问题
2.代码安全性：  写的时候有没有犯一些愚蠢/偷懒的问题



## http协议  RFC2612
RFC: 一系列以编号排定的文件    互联网所有协议的标准版本都用RFC

1. [c->s]发送链接请求
2. [c<-s]服务器接受（拒绝）
3. [c->s]发送请求  Request 
4. [c<-s]数据[后断开]  Response

HTTP消息
-   HEADER <= 32K  - |
-- | -- |
-   BODY  <= 1G  - |

get:数据在URL上(HTTP头)
post:数据放在HTTP的包体内



## OSI七层交换“参考”模型：
- 7. 应用层  应用细节 HTTP\FTP\SMTP\POP3
- 6. 会话层  x  希望记录状态   [无状态通信 不记录状态]  
- 5. 表现层  x  统一各个网络结构（拨号、光纤、卫星）
- 4. 传输层  通信稳定性（错误、顺序..） tcp 
- 3. 网络层  外网寻址（链接INTER） IP
- 2. 链路层  内网寻址（局域网内） ARP  icmpicmp
- 1. 物理层  物理学家、通信工程--材料、电压



## 表单：
1. 属性
   action   提交到哪里
   method   GET、POST    PUT、HEADER、DELETE；自定义
   name     必须加、可以重复
   submit按钮   input[submit]
2. 数据提交方法
   GET请求：数据放在URL中
        - 用量有限
        - 人眼是看得见（表单）
        - 有缓存
        - 利于分享和收藏
   POST请求：数据不再URL上
        - 容量1G
        - 上传没有断点续传
        - 看不见（表单）
        - 不缓存
        - 没办法分享、收藏
    两种方法安全性一样，只有HTTPS相对安全。
3. 校验
    


## Ajax：
1. 浏览器
- xhr的同步和异步
    - 同步是 串行
    - 异步是 并行
    - xhr.readystate  
        - 0 初始化-刚创建   
        - 1 已连接
        - 2 已发送
        - 3 已接收 - header
        - 4 已接收 - body  完事，不论成功失败
    - http状态码：数字
        - 1xx  消息    ==>websocket
        - 2xx  成功
        - 3xx  重定向  ==>
               - 301 永久重定向
               - 302 临时重定向
               - 304 成功成缓存中拿到数据
        - 4xx  请求错误
        - 5xx  服务端错误
        - 6xx  扩展
- xhr.responseText 文本
  xhr.responseXML  xml数据
2. 服务器



## 问题
1. ws向下兼容
2. 从前台来的任何数据都不可信，任何一个字符都需要校验
3. 怎么理解http和https | http1.0、http2.0
    http:            容易被攻击
    https: security  安全的

    http1.0    最古老、一次性链接
    http1.1    保持链接   性能有提升
    http2.0    草案
                强制https
                自带双向通信
                协议级的多路复用
4. cookies和session的区别
5. TCP - 传输控制协议
    - 保证到达
    - 保证质量
    - 保证顺序
   UDP - 用户数据报协议   对质量没有绝对要求、对延迟有很高要求     IP电话、视频直播
    -  不保证到达
    -  不保证质量
    -  不保证顺序

   HTTP就是应用层协议，它是基于TCP的。
6. 什么时候ajax,什么时候用表单提交？
    表单 -- 更稳定   <== 表单提交是浏览器实现的
    ajax -- 用户体检 <== js实现
7. 表单重复提交怎么处理？
    - 开始提交的时候禁用submit /  完成后取消

8. DOM4j 解析XML和HTML的区别
9. postman
10. 派发和重定向（转发）的区别
    重定向  给浏览器下命令   让浏览器去请求另一个地址  --  地址变
    派发    在服务器内部，把请求转发给另一个模块处理；对客户端是不可见的 -- 地址不变

